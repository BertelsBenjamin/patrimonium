<div class="container">
  <div class="row">
    <div class="col-8">
      <ul class="nav nav-pills">
        <li class="nav-item">
          <a class="nav-link" routerLink='/dispatcher/academies' routerLinkActive="active-link">Academies</a>
        </li>
        <li class="nav-item">
          <a class="nav-link active" routerLink="/dispatcher/technicians" routerLinkActive="active-link">Technicians</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" routerLink="/dispatcher/logs" routerLinkActive="active-link">Logs<span
              class="badge badge-danger">4</span></a>
        </li>
      </ul>
    </div>
    <div class="col-4">
      <ul class="nav nav-pills justify-content-end">
        <li class="list-item">
          <a class="nav-link" href=".">
            <small>Logged in as {{user.user_first_name}} {{user.user_last_name}}</small>
          </a>
        </li>
      </ul>
    </div>
  </div>
  <hr>
  <div class="row">
    <div class="col">
      <div class="input-group d-flex justify-content-start mb-3">
        <div class="input-group-prepend">
          <span class="input-group-text" id="basic-addon1">
            <i class="fas fa-search"></i>
          </span>
        </div>
        <input id="dispatcher-input" class="form-control rounded" placeholder="Search by name, street, place, ..."
          #dispatcherInput (keyup)='filterTechniciansOnDispInput(dispatcherInput.value)'>
        <button type="button" class="btn btn-success ml-3" data-toggle="modal" data-target="#Modal_add_technician">
          <i class="fas fa-plus mr-3"></i>Add new technician
        </button>
        <div class="modal fade" id='Modal_add_technician' tabindex="-1" role="dialog" aria-hidden="true">
          <div class="modal-dialog modal-dialog-centered modal-xl" role="document">
            <div class="modal-content modal-content-center">
              <div class="modal-header">
                <h3 class="modal-title">Add new technician</h3>
              </div>
              <div class="modal-body">
                <div class="card">
                  <div class="card-body">
                    <div class="row">
                      <div class="col-6">
                        <div class="input-group input-group-sm mb-3">
                          <div class="input-group-prepend">
                            <span class="input-group-text" id="label_username">Username</span>
                          </div>
                          <input type="text" class="form-control" placeholder="Username" aria-label="Username"
                            aria-describedby="label_username">
                        </div>
                        <div class="input-group input-group-sm mb-3">
                          <div class="input-group-prepend">
                            <span class="input-group-text" id="label_role">Role</span>
                          </div>
                          <input id="typeahead-focus" type="text" class="form-control" [(ngModel)]="model"
                            [ngbTypeahead]="search" (focus)="focus$.next($event.target.value)"
                            (click)="click$.next($event.target.value)" #instance="ngbTypeahead" />
                        </div>
                      </div>
                      <div class="col-6">

                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-success" data-dismiss="modal"
                  (click)='addNewTechnician()'>Add</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <table class="table table-striped table-sm">
      <thead class="thead-dark">
        <tr class="small">
          <th scope="col">#</th>
          <th scope="col">Username</th>
          <th scope="col">Country</th>
          <th scope="col">Department</th>
          <th scope="col">Level</th>
          <th scope="col">Province</th>
          <th scope="col">Email</th>
          <th scope="col">Phone</th>
          <th scope="col">Delete</th>
        </tr>
      </thead>
      <tbody id="allTechnicians" class="border">
        <tr class="small" [attr.id]="'Technician_' + technician.user_id" *ngFor='let technician of technicians'>
          <td>{{technician.user_id}}</td>
          <td>{{technician.user_username}}</td>
          <td>{{technician.user_country_code}}</td>
          <td>{{technician.user_department}}</td>
          <td>{{technician.user_level}}</td>
          <td>{{technician.user_province_name}}</td>
          <td>
            <a class="mr-3" [attr.href]="'mailto:' + technician.user_email"><i class="fas fa-envelope"></i></a>
          </td>
          <td>
            <a [attr.href]="'tel:' + technician.user_mobile"><i class="fas fa-phone"
                style="color: hsl(134, 61%, 41%);"></i>
            </a>
          </td>
          <td><a type="button" (click)='deleteTechnician(technician.user_id)'><i class="fas fa-trash-alt"
                style="color: red;"></i></a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
